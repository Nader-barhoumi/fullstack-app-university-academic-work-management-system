<div class="container mt-4">
  <h2>{{ isEditMode ? 'Edit State' : 'Create State' }}</h2>

  <div *ngIf="errorMessage" class="alert alert-danger" role="alert">
    {{ errorMessage }}
  </div>

  <form (ngSubmit)="onSubmit()" #stateForm="ngForm">
    <div class="mb-3">
      <label for="name" class="form-label">Name</label>
      <input
        type="text"
        class="form-control"
        id="name"
        [(ngModel)]="state.name"
        name="name"
        #nameInput="ngModel"
        maxlength="30"
        required
      >
      <small class="form-text text-muted">State name, maximum 30 characters</small>
    </div>

    <div class="mb-3">
      <label for="code" class="form-label">Code</label>
      <input
        type="text"
        class="form-control"
        id="code"
        [(ngModel)]="state.code"
        name="code"
        #codeInput="ngModel"
        maxlength="2"
        style="text-transform: uppercase;"
        required
      >
      <small class="form-text text-muted">State code must be exactly 2 uppercase letters (e.g., CA, NY)</small>
    </div>

    <div class="d-flex gap-2">
      <button
        type="submit"
        class="btn btn-primary"
        [disabled]="isSubmitting">
        <span *ngIf="isSubmitting" class="spinner-border spinner-border-sm me-1" role="status" aria-hidden="true"></span>
        {{ isEditMode ? 'Update' : 'Create' }}
      </button>
      <button type="button" class="btn btn-secondary" (click)="cancel()" [disabled]="isSubmitting">Cancel</button>
    </div>
  </form>
</div>
